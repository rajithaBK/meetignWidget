{"ast":null,"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs2/core-js/object/define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/createClass\"));\n\nvar _weakMap = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/weak-map\"));\n\nvar _isArray = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/array/is-array\"));\n\nvar _iterator = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/symbol/iterator\"));\n/*!\n * Copyright (c) 2015-2020 Cisco Systems, Inc. See LICENSE file.\n */\n\n\nvar itemsMap = new _weakMap.default();\nvar linksMap = new _weakMap.default();\nvar webexsMap = new _weakMap.default();\n/**\n * @class Page\n */\n\nvar Page = /*#__PURE__*/function (_Symbol$iterator) {\n  /**\n   * @constructs {Page}\n   * @param {HttpResponse} res\n   * @param {ProxyWebex} webex\n   * @returns {Page}\n   */\n  function Page(res, webex) {\n    (0, _classCallCheck2.default)(this, Page);\n    itemsMap.set(this, res.body.items);\n    linksMap.set(this, Page.parseLinkHeaders(res.headers.link));\n    webexsMap.set(this, webex);\n    return this;\n  }\n  /**\n   * Separate a single link header string into an actionable object\n   * @param {string} linkHeaders\n   * @private\n   * @returns {Object}\n   */\n\n\n  (0, _createClass2.default)(Page, [{\n    key: \"items\",\n    get:\n    /**\n     * @type {Array}\n     */\n    function get() {\n      return itemsMap.get(this);\n    }\n    /**\n     * @type {number}\n     */\n\n  }, {\n    key: \"length\",\n    get: function get() {\n      return this.items.length;\n    }\n    /**\n     * @private\n     * @type {Object}\n     */\n\n  }, {\n    key: \"links\",\n    get: function get() {\n      return linksMap.get(this);\n    }\n    /**\n     * @private\n     * @type {ProxyWebex}\n     */\n\n  }, {\n    key: \"webex\",\n    get: function get() {\n      return webexsMap.get(this);\n    }\n  }, {\n    key: \"next\",\n    value:\n    /**\n     * Get next page\n     * @returns {Function}\n     */\n    function next() {\n      return this.getLink('next');\n    }\n    /**\n     * Indicates if there's another page\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: \"hasNext\",\n    value: function hasNext() {\n      return this.hasLink('next');\n    }\n    /**\n     * Get previous page\n     * @returns {Page}\n     */\n\n  }, {\n    key: \"previous\",\n    value: function previous() {\n      return this.getLink('previous');\n    }\n    /**\n     * Indicates if there is a previous Page\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: \"hasPrevious\",\n    value: function hasPrevious() {\n      return this.hasLink('previous');\n    }\n    /**\n     * Retrieves the `Page` at url specified by `link`\n     * @param {string} link Specifies which link header to return\n     * @private\n     * @returns {Promise<Page>}\n     */\n\n  }, {\n    key: \"getLink\",\n    value: function getLink(link) {\n      var _this = this;\n\n      return this.webex.request({\n        uri: this.links[link]\n      }).then(function (res) {\n        return new Page(res, _this.webex);\n      });\n    }\n    /**\n     * Indicates if the specified link is in the link header\n     * @param {string} link\n     * @private\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: \"hasLink\",\n    value: function hasLink(link) {\n      return Boolean(this.links[link]);\n    }\n    /**\n     * Iterator\n     * @returns {Object}\n     */\n\n  }, {\n    key: _Symbol$iterator,\n    value: function value() {\n      var _this2 = this;\n\n      var i = -1;\n      return {\n        next: function next() {\n          i += 1;\n\n          if (i < _this2.length) {\n            return {\n              value: _this2.items[i]\n            };\n          }\n\n          return {\n            done: true\n          };\n        }\n      };\n    }\n  }], [{\n    key: \"parseLinkHeaders\",\n    value: function parseLinkHeaders(linkHeaders) {\n      if (!linkHeaders) {\n        return {};\n      }\n\n      linkHeaders = (0, _isArray.default)(linkHeaders) ? linkHeaders : [linkHeaders];\n      return linkHeaders.reduce(function (links, linkHeader) {\n        linkHeader = linkHeader.split(';');\n        var link = linkHeader[0].replace('<', '').replace('>', '');\n        var rel = linkHeader[1].split('=')[1].replace(/\"/g, '');\n        links[rel] = link;\n        return links;\n      }, {});\n    }\n  }]);\n  return Page;\n}(_iterator.default);\n\nexports.default = Page;","map":{"version":3,"mappings":"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","names":["itemsMap","linksMap","webexsMap","Page","res","webex","set","body","items","parseLinkHeaders","headers","link","get","length","getLink","hasLink","request","uri","links","then","_this","Boolean","i","next","_this2","value","done","linkHeaders","reduce","linkHeader","split","replace","rel"],"sources":["page.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2020 Cisco Systems, Inc. See LICENSE file.\n */\n\nconst itemsMap = new WeakMap();\nconst linksMap = new WeakMap();\nconst webexsMap = new WeakMap();\n\n/**\n * @class Page\n */\nexport default class Page {\n  /**\n   * @type {Array}\n   */\n  get items() {\n    return itemsMap.get(this);\n  }\n\n  /**\n   * @type {number}\n   */\n  get length() {\n    return this.items.length;\n  }\n\n  /**\n   * @private\n   * @type {Object}\n   */\n  get links() {\n    return linksMap.get(this);\n  }\n\n  /**\n   * @private\n   * @type {ProxyWebex}\n   */\n  get webex() {\n    return webexsMap.get(this);\n  }\n\n  /**\n   * @constructs {Page}\n   * @param {HttpResponse} res\n   * @param {ProxyWebex} webex\n   * @returns {Page}\n   */\n  constructor(res, webex) {\n    itemsMap.set(this, res.body.items);\n    linksMap.set(this, Page.parseLinkHeaders(res.headers.link));\n    webexsMap.set(this, webex);\n\n    return this;\n  }\n\n  /**\n   * Separate a single link header string into an actionable object\n   * @param {string} linkHeaders\n   * @private\n   * @returns {Object}\n   */\n  static parseLinkHeaders(linkHeaders) {\n    if (!linkHeaders) {\n      return {};\n    }\n\n    linkHeaders = Array.isArray(linkHeaders) ? linkHeaders : [linkHeaders];\n\n    return linkHeaders.reduce((links, linkHeader) => {\n      linkHeader = linkHeader.split(';');\n      const link = linkHeader[0]\n        .replace('<', '')\n        .replace('>', '');\n      const rel = linkHeader[1]\n        .split('=')[1]\n        .replace(/\"/g, '');\n\n      links[rel] = link;\n\n      return links;\n    }, {});\n  }\n\n  /**\n   * Get next page\n   * @returns {Function}\n   */\n  next() {\n    return this.getLink('next');\n  }\n\n  /**\n   * Indicates if there's another page\n   * @returns {Boolean}\n   */\n  hasNext() {\n    return this.hasLink('next');\n  }\n\n  /**\n   * Get previous page\n   * @returns {Page}\n   */\n  previous() {\n    return this.getLink('previous');\n  }\n\n  /**\n   * Indicates if there is a previous Page\n   * @returns {Boolean}\n   */\n  hasPrevious() {\n    return this.hasLink('previous');\n  }\n\n  /**\n   * Retrieves the `Page` at url specified by `link`\n   * @param {string} link Specifies which link header to return\n   * @private\n   * @returns {Promise<Page>}\n   */\n  getLink(link) {\n    return this.webex.request({\n      uri: this.links[link]\n    })\n      .then((res) => new Page(res, this.webex));\n  }\n\n  /**\n   * Indicates if the specified link is in the link header\n   * @param {string} link\n   * @private\n   * @returns {Boolean}\n   */\n  hasLink(link) {\n    return Boolean(this.links[link]);\n  }\n\n  /**\n   * Iterator\n   * @returns {Object}\n   */\n  [Symbol.iterator]() {\n    let i = -1;\n\n    return {\n      next: () => {\n        i += 1;\n        if (i < this.length) {\n          return {\n            value: this.items[i]\n          };\n        }\n\n        return {done: true};\n      }\n    };\n  }\n}\n"]},"metadata":{},"sourceType":"script"}