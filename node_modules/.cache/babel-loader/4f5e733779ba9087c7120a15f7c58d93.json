{"ast":null,"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs2/core-js/object/define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _keys = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/object/keys\"));\n\nvar _ampersandState = _interopRequireDefault(require(\"ampersand-state\"));\n\nvar _constants = require(\"../constants\");\n\nvar _featureCollection = _interopRequireDefault(require(\"./feature-collection\")); // External dependencies.\n// Local Dependencies\n\n/**\n * Feature collection parent container.\n *\n * @description\n * This class contains all of the feature collection class objects to help\n * organize the data retrieved from the **wdm** service on device registration.\n */\n\n\nvar FeaturesModel = _ampersandState.default.extend({\n  // Ampersand property members.\n  collections: {\n    /**\n     * This collection contains the developer feature collection.\n     *\n     * @type {FeatureCollection}\n     */\n    developer: _featureCollection.default,\n\n    /**\n     * This collection contains the entitlement feature collection.\n     *\n     * @type {FeatureCollection}\n     */\n    entitlement: _featureCollection.default,\n\n    /**\n     * This collection contains the user feature collection.\n     *\n     * @type {FeatureCollection}\n     */\n    user: _featureCollection.default\n  },\n  // Helper method members.\n\n  /**\n   * Recursively clear attributes, children, and collections.\n   *\n   * @param {Object} options - Attribute options to unset.\n   * @returns {this}\n   */\n  clear: function clear(options) {\n    var _this = this; // Clear the ampersand attributes safely if there are any. This class should\n    // never have any attributes.\n\n\n    (0, _keys.default)(this.attributes).forEach(function (key) {\n      _this.unset(key, options);\n    }); // Clear the ampersand children safely if there are any. This class should\n    // never have any children.\n\n    /* eslint-disable-next-line no-underscore-dangle */\n\n    (0, _keys.default)(this._children).forEach(function (key) {\n      _this[key].clear();\n    }); // Clear the ampersand collections safely.\n\n    /* eslint-disable-next-line no-underscore-dangle */\n\n    (0, _keys.default)(this._collections).forEach(function (key) {\n      _this[key].reset();\n    });\n    return this;\n  },\n  // Ampersand method members.\n\n  /**\n   * Initializer method for FeatureModel class object.\n   *\n   * @override\n   * @returns {void}\n   */\n  initialize: function initialize() {\n    var _this2 = this; // Declare the collection event names.\n\n\n    var eventNames = ['change:value', 'add', 'remove']; // Initialize collection event listeners.\n\n    eventNames.forEach(function (eventName) {\n      _constants.FEATURE_COLLECTION_NAMES.forEach(function (collectionName) {\n        _this2[collectionName].on(eventName, function (model, options) {\n          _this2.trigger(\"change:\".concat(collectionName), _this2, _this2[collectionName], options);\n        });\n      });\n    });\n  }\n});\n\nvar _default = FeaturesModel;\nexports.default = _default;","map":{"version":3,"mappings":";;;;;;;;;;;;;;AACA;;AAGA;;AAEA,iF,CANA;AAGA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAMA,aAAa,GAAGC,wBAASC,MAATD,CAAgB;AAEpC;AAEAE,aAAW,EAAE;AACX;AACJ;AACA;AACA;AACA;AACIC,aAAS,EAAEC,0BANA;;AAQX;AACJ;AACA;AACA;AACA;AACIC,eAAW,EAAED,0BAbF;;AAeX;AACJ;AACA;AACA;AACA;AACIE,QAAI,EAAEF;AApBK,GAJuB;AA2BpC;;AAEA;AACF;AACA;AACA;AACA;AACA;AACEG,OAnCoC,iBAmC9BC,OAnC8B,EAmCrB;AAAA,sBACb;AACA;;;AACA,uBAAY,KAAKC,UAAjB,EAA6BC,OAA7B,CAAqC,UAACC,GAAD,EAAS;AAC5CC,WAAI,CAACC,KAAL,CAAWF,GAAX,EAAgBH,OAAhB;AADF,OAHa,CAOb;AACA;;AACA;;AACA,uBAAY,KAAKM,SAAjB,EAA4BJ,OAA5B,CAAoC,UAACC,GAAD,EAAS;AAC3CC,WAAI,CAACD,GAAD,CAAJ,CAAUJ,KAAV;AADF,OAVa,CAcb;;AACA;;AACA,uBAAY,KAAKQ,YAAjB,EAA+BL,OAA/B,CAAuC,UAACC,GAAD,EAAS;AAC9CC,WAAI,CAACD,GAAD,CAAJ,CAAUK,KAAV;AADF;AAIA,WAAO,IAAP;AAvDkC;AA0DpC;;AAEA;AACF;AACA;AACA;AACA;AACA;AACEC,YAlEoC,wBAkEvB;AAAA,uBACX;;;AACA,QAAMC,UAAU,GAAG,CAAC,cAAD,EAAiB,KAAjB,EAAwB,QAAxB,CAAnB,CAFW,CAIX;;AACAA,cAAU,CAACR,OAAXQ,CAAmB,UAACC,SAAD,EAAe;AAChCC,0CAAyBV,OAAzBU,CAAiC,UAACC,cAAD,EAAoB;AACnDC,cAAI,CAACD,cAAD,CAAJ,CAAqBE,EAArB,CAAwBJ,SAAxB,EAAmC,UAACK,KAAD,EAAQhB,OAAR,EAAoB;AACrDc,gBAAI,CAACG,OAAL,kBACYJ,cADZ,GAEEC,MAFF,EAGEA,MAAI,CAACD,cAAD,CAHN,EAIEb,OAJF;AADF;AADF;AADF;AAYD;AAnFmC,CAAhBR,CAAtB;;eAsFeD","names":["FeaturesModel","AmpState","extend","collections","developer","FeatureCollection","entitlement","user","clear","options","attributes","forEach","key","_this","unset","_children","_collections","reset","initialize","eventNames","eventName","FEATURE_COLLECTION_NAMES","collectionName","_this2","on","model","trigger"],"sources":["features-model.js"],"sourcesContent":["// External dependencies.\nimport AmpState from 'ampersand-state';\n\n// Local Dependencies\nimport {FEATURE_COLLECTION_NAMES} from '../constants';\n\nimport FeatureCollection from './feature-collection';\n\n/**\n * Feature collection parent container.\n *\n * @description\n * This class contains all of the feature collection class objects to help\n * organize the data retrieved from the **wdm** service on device registration.\n */\nconst FeaturesModel = AmpState.extend({\n\n  // Ampersand property members.\n\n  collections: {\n    /**\n     * This collection contains the developer feature collection.\n     *\n     * @type {FeatureCollection}\n     */\n    developer: FeatureCollection,\n\n    /**\n     * This collection contains the entitlement feature collection.\n     *\n     * @type {FeatureCollection}\n     */\n    entitlement: FeatureCollection,\n\n    /**\n     * This collection contains the user feature collection.\n     *\n     * @type {FeatureCollection}\n     */\n    user: FeatureCollection\n  },\n\n  // Helper method members.\n\n  /**\n   * Recursively clear attributes, children, and collections.\n   *\n   * @param {Object} options - Attribute options to unset.\n   * @returns {this}\n   */\n  clear(options) {\n    // Clear the ampersand attributes safely if there are any. This class should\n    // never have any attributes.\n    Object.keys(this.attributes).forEach((key) => {\n      this.unset(key, options);\n    });\n\n    // Clear the ampersand children safely if there are any. This class should\n    // never have any children.\n    /* eslint-disable-next-line no-underscore-dangle */\n    Object.keys(this._children).forEach((key) => {\n      this[key].clear();\n    });\n\n    // Clear the ampersand collections safely.\n    /* eslint-disable-next-line no-underscore-dangle */\n    Object.keys(this._collections).forEach((key) => {\n      this[key].reset();\n    });\n\n    return this;\n  },\n\n  // Ampersand method members.\n\n  /**\n   * Initializer method for FeatureModel class object.\n   *\n   * @override\n   * @returns {void}\n   */\n  initialize() {\n    // Declare the collection event names.\n    const eventNames = ['change:value', 'add', 'remove'];\n\n    // Initialize collection event listeners.\n    eventNames.forEach((eventName) => {\n      FEATURE_COLLECTION_NAMES.forEach((collectionName) => {\n        this[collectionName].on(eventName, (model, options) => {\n          this.trigger(\n            `change:${collectionName}`,\n            this,\n            this[collectionName],\n            options\n          );\n        });\n      });\n    });\n  }\n});\n\nexport default FeaturesModel;\n"]},"metadata":{},"sourceType":"script"}