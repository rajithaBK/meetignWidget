{"ast":null,"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs2/core-js/object/define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _ampersandState = _interopRequireDefault(require(\"ampersand-state\")); // The credentials config which includes the CI server info and derived\n// URL properties from them for the various CI services.  The URL's\n// will be updated when the CI changes.\n\n\nvar CredentialsConfig = _ampersandState.default.extend({\n  // we need to allow extra props for dynamic props like jwtRefreshCallback\n  extraProperties: 'allow',\n  props: {\n    /**\n     * The idbroker base host name\n     * @returns {object}\n     */\n    idbroker: ['object', false, function () {\n      return {\n        url: process.env.IDBROKER_BASE_URL || 'https://idbroker.webex.com'\n      };\n    }],\n\n    /**\n     * The identity base host name\n     * @returns {object}\n     */\n    identity: ['object', false, function () {\n      return {\n        url: process.env.IDENTITY_BASE_URL || 'https://identity.webex.com'\n      };\n    }],\n\n    /**\n      * This is the authorization url displayed on the\n      * {@link developer portal|https://developer.webex.com}\n      * @type {string}\n      */\n    authorizationString: ['string', false, process.env.WEBEX_AUTHORIZATION_STRING || process.env.AUTHORIZATION_STRING],\n\n    /**\n     * Authorization URL which prompts for user's password. Inferred from\n     * {@link config.credentials.authorizationString}. This config value will\n     * be automatically set if `authorizationString` config value is specified.\n     *\n     * @type {string}\n     */\n    authorizeUrl: ['string', false, process.env.WEBEX_AUTHORIZE_URL || \"\".concat(process.env.IDBROKER_BASE_URL || 'https://idbroker.webex.com', \"/idb/oauth2/v1/authorize\")],\n\n    /**\n      * {@see https://tools.ietf.org/html/rfc6749#section-4.1.4}\n      * @type {string}\n      */\n    client_id: ['string', false, process.env.WEBEX_CLIENT_ID || process.env.COMMON_IDENTITY_CLIENT_ID || process.env.CLIENT_ID],\n\n    /**\n      * {@see https://tools.ietf.org/html/rfc6749#section-4.1.4}\n      * @type {string}\n      */\n    client_secret: ['string', false, process.env.WEBEX_CLIENT_SECRET || process.env.COMMON_IDENTITY_CLIENT_SECRET || process.env.CLIENT_SECRET],\n\n    /**\n      * {@see https://tools.ietf.org/html/rfc6749#section-4.1.4}\n      * @type {string}\n      */\n    redirect_uri: ['string', false, process.env.WEBEX_REDIRECT_URI || process.env.COMMON_IDENTITY_REDIRECT_URI || process.env.REDIRECT_URI],\n\n    /**\n      * {@see https://tools.ietf.org/html/rfc6749#section-4.1.4}\n      * @type {string}\n      */\n    scope: ['string', false, process.env.WEBEX_SCOPE || process.env.WEBEX_SCOPES || process.env.COMMON_IDENTITY_SCOPE || process.env.SCOPE],\n\n    /**\n      * Controls the UI of the CI login page.\n      * @private\n      * @type {string}\n      */\n    cisService: ['string', false, 'webex']\n  },\n  derived: {\n    /**\n      * User activation URL\n      * {@link config.credentials.activationUrl}\n      * @type {string}\n      */\n    activationUrl: {\n      deps: ['idbroker.url'],\n      fn: function fn() {\n        return \"\".concat(this.idbroker.url || 'https://idbroker.webex.com', \"/idb/token/v1/actions/UserActivation/invoke\");\n      },\n      cache: false\n    },\n\n    /**\n      * Generate OTP URL\n      * {@link config.credentials.generateOtpUrl}\n      * @type {string}\n      */\n    generateOtpUrl: {\n      deps: ['idbroker.url'],\n      fn: function fn() {\n        return \"\".concat(this.idbroker.url || 'https://idbroker.webex.com', \"/idb/token/v1/actions/UserOTP/Generate/invoke\");\n      },\n      cache: false\n    },\n\n    /**\n      * Validate OTP URL\n      * {@link config.credentials.validateOtpUrl}\n      * @type {string}\n      */\n    validateOtpUrl: {\n      deps: ['idbroker.url'],\n      fn: function fn() {\n        return \"\".concat(this.idbroker.url || 'https://idbroker.webex.com', \"/idb/token/v1/actions/UserOTP/Validate/invoke\");\n      },\n      cache: false\n    },\n    // TODO does hydra also have an access_token endpoint?\n\n    /**\n      * Token URL used for token refresh and auth code exchange\n      * @type {string}\n      */\n    tokenUrl: {\n      deps: ['idbroker.url'],\n      fn: function fn() {\n        return process.env.TOKEN_URL || \"\".concat(this.idbroker.url, \"/idb/oauth2/v1/access_token\");\n      },\n      cache: false\n    },\n\n    /**\n      * URL to revoke token\n      * @type {string}\n      */\n    revokeUrl: {\n      deps: ['idbroker.url'],\n      fn: function fn() {\n        return process.env.REVOKE_URL || \"\".concat(this.idbroker.url, \"/idb/oauth2/v1/revoke\");\n      },\n      cache: false\n    },\n\n    /**\n      * URL to load when the app logs out\n      * @type {string}\n      */\n    logoutUrl: {\n      deps: ['idbroker.url'],\n      fn: function fn() {\n        return \"\".concat(this.idbroker.url, \"/idb/oauth2/v1/logout\");\n      },\n      cache: false\n    },\n\n    /**\n      * Set password URL\n      * @type {string}\n      */\n    setPasswordUrl: {\n      deps: ['identity.url'],\n      fn: function fn() {\n        return \"\".concat(this.identity.url || 'https://identity.webex.com', \"/identity/scim/v1/Users\");\n      },\n      cache: false\n    }\n  }\n});\n\nvar _default = CredentialsConfig;\nexports.default = _default;","map":{"version":3,"mappings":"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","names":["CredentialsConfig","AmpState","extend","extraProperties","props","idbroker","url","process","env","IDBROKER_BASE_URL","identity","IDENTITY_BASE_URL","authorizationString","WEBEX_AUTHORIZATION_STRING","AUTHORIZATION_STRING","authorizeUrl","WEBEX_AUTHORIZE_URL","client_id","WEBEX_CLIENT_ID","COMMON_IDENTITY_CLIENT_ID","CLIENT_ID","client_secret","WEBEX_CLIENT_SECRET","COMMON_IDENTITY_CLIENT_SECRET","CLIENT_SECRET","redirect_uri","WEBEX_REDIRECT_URI","COMMON_IDENTITY_REDIRECT_URI","REDIRECT_URI","scope","WEBEX_SCOPE","WEBEX_SCOPES","COMMON_IDENTITY_SCOPE","SCOPE","cisService","derived","activationUrl","deps","fn","cache","generateOtpUrl","validateOtpUrl","tokenUrl","TOKEN_URL","revokeUrl","REVOKE_URL","logoutUrl","setPasswordUrl"],"sources":["credentials-config.js"],"sourcesContent":["import AmpState from 'ampersand-state';\n\n// The credentials config which includes the CI server info and derived\n// URL properties from them for the various CI services.  The URL's\n// will be updated when the CI changes.\nconst CredentialsConfig = AmpState.extend({\n\n  // we need to allow extra props for dynamic props like jwtRefreshCallback\n  extraProperties: 'allow',\n\n  props: {\n    /**\n     * The idbroker base host name\n     * @returns {object}\n     */\n    idbroker: ['object', false, (() => ({\n      url: process.env.IDBROKER_BASE_URL || 'https://idbroker.webex.com'\n    }))],\n\n    /**\n     * The identity base host name\n     * @returns {object}\n     */\n    identity: ['object', false, (() => ({\n      url: process.env.IDENTITY_BASE_URL || 'https://identity.webex.com'\n    }))],\n\n    /**\n      * This is the authorization url displayed on the\n      * {@link developer portal|https://developer.webex.com}\n      * @type {string}\n      */\n    authorizationString: ['string', false, process.env.WEBEX_AUTHORIZATION_STRING || process.env.AUTHORIZATION_STRING],\n\n    /**\n     * Authorization URL which prompts for user's password. Inferred from\n     * {@link config.credentials.authorizationString}. This config value will\n     * be automatically set if `authorizationString` config value is specified.\n     *\n     * @type {string}\n     */\n    authorizeUrl: [\n      'string',\n      false,\n      process.env.WEBEX_AUTHORIZE_URL ||\n       `${process.env.IDBROKER_BASE_URL || 'https://idbroker.webex.com'}/idb/oauth2/v1/authorize`\n    ],\n\n    /**\n      * {@see https://tools.ietf.org/html/rfc6749#section-4.1.4}\n      * @type {string}\n      */\n    client_id: ['string', false, process.env.WEBEX_CLIENT_ID || process.env.COMMON_IDENTITY_CLIENT_ID || process.env.CLIENT_ID],\n\n    /**\n      * {@see https://tools.ietf.org/html/rfc6749#section-4.1.4}\n      * @type {string}\n      */\n    client_secret: ['string', false, process.env.WEBEX_CLIENT_SECRET || process.env.COMMON_IDENTITY_CLIENT_SECRET || process.env.CLIENT_SECRET],\n\n    /**\n      * {@see https://tools.ietf.org/html/rfc6749#section-4.1.4}\n      * @type {string}\n      */\n    redirect_uri: ['string', false, process.env.WEBEX_REDIRECT_URI || process.env.COMMON_IDENTITY_REDIRECT_URI || process.env.REDIRECT_URI],\n\n    /**\n      * {@see https://tools.ietf.org/html/rfc6749#section-4.1.4}\n      * @type {string}\n      */\n    scope: ['string', false, process.env.WEBEX_SCOPE || process.env.WEBEX_SCOPES || process.env.COMMON_IDENTITY_SCOPE || process.env.SCOPE],\n\n    /**\n      * Controls the UI of the CI login page.\n      * @private\n      * @type {string}\n      */\n    cisService: ['string', false, 'webex']\n  },\n\n  derived: {\n    /**\n      * User activation URL\n      * {@link config.credentials.activationUrl}\n      * @type {string}\n      */\n    activationUrl: {\n      deps: ['idbroker.url'],\n      fn() {\n        return `${this.idbroker.url || 'https://idbroker.webex.com'}/idb/token/v1/actions/UserActivation/invoke`;\n      },\n      cache: false\n    },\n\n    /**\n      * Generate OTP URL\n      * {@link config.credentials.generateOtpUrl}\n      * @type {string}\n      */\n    generateOtpUrl: {\n      deps: ['idbroker.url'],\n      fn() {\n        return `${this.idbroker.url || 'https://idbroker.webex.com'}/idb/token/v1/actions/UserOTP/Generate/invoke`;\n      },\n      cache: false\n    },\n\n    /**\n      * Validate OTP URL\n      * {@link config.credentials.validateOtpUrl}\n      * @type {string}\n      */\n    validateOtpUrl: {\n      deps: ['idbroker.url'],\n      fn() {\n        return `${this.idbroker.url || 'https://idbroker.webex.com'}/idb/token/v1/actions/UserOTP/Validate/invoke`;\n      },\n      cache: false\n    },\n\n    // TODO does hydra also have an access_token endpoint?\n    /**\n      * Token URL used for token refresh and auth code exchange\n      * @type {string}\n      */\n    tokenUrl: {\n      deps: ['idbroker.url'],\n      fn() {\n        return process.env.TOKEN_URL || `${this.idbroker.url}/idb/oauth2/v1/access_token`;\n      },\n      cache: false\n    },\n\n    /**\n      * URL to revoke token\n      * @type {string}\n      */\n    revokeUrl: {\n      deps: ['idbroker.url'],\n      fn() {\n        return process.env.REVOKE_URL || `${this.idbroker.url}/idb/oauth2/v1/revoke`;\n      },\n      cache: false\n    },\n\n    /**\n      * URL to load when the app logs out\n      * @type {string}\n      */\n    logoutUrl: {\n      deps: ['idbroker.url'],\n      fn() {\n        return `${this.idbroker.url}/idb/oauth2/v1/logout`;\n      },\n      cache: false\n    },\n\n    /**\n      * Set password URL\n      * @type {string}\n      */\n    setPasswordUrl: {\n      deps: ['identity.url'],\n      fn() {\n        return `${this.identity.url || 'https://identity.webex.com'}/identity/scim/v1/Users`;\n      },\n      cache: false\n    }\n\n  }\n\n});\n\nexport default CredentialsConfig;\n"]},"metadata":{},"sourceType":"script"}